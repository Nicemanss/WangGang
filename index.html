<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Wang Gang</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script>
window.addEventListener('load', async () => {
    // Modern dapp browsers...
    if (window.ethereum) {
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/WangGang.json", {onProgress: UnityProgress});
    	document.getElementById("metamaskWarning").innerText = '';
        window.web3 = new Web3(ethereum);
        try {
            // Request account access if needed
            await ethereum.enable();
            // Acccounts now exposed
            web3.eth.sendTransaction({/* ... */});
        } catch (error) {
            // User denied account access...
        }
    }
    // Legacy dapp browsers...
    else if (window.web3) {
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/WangGang.json", {onProgress: UnityProgress});
    	document.getElementById("metamaskWarning").innerText = '';
        window.web3 = new Web3(web3.currentProvider);
        // Acccounts always exposed
        web3.eth.sendTransaction({/* ... */});
    }
    // Non-dapp browsers...
    else {
        document.getElementById("metamaskWarning").innerText = 'Please use Chrome and install HPB Chrome Extension from http://hpb.io/client and add coins for contract interaction to submit your top score';
    }
});
  </script>
  </head>
  <body>
    <div class="webgl-content">
      <div id="gameContainer" style="width: 960px; height: 600px"></div>
      <div class="footer">
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
      </div>
       <div class="footer">
        <h2 id="metamaskWarning" style="color:red"></h2>
        Hello, I'm Nicemans. Please consider voting for me in the election. It's your votes that push me into creating things such as the first <a href="https://hpb.community">community webpage</a>, the first <a href="https://myhpbwallet.com">web and desktop wallet</a>, as well as Hardware Wallet support for Ledger and Trezor. What you see above is the next step.</div>
    </div>
  </body>
</html>